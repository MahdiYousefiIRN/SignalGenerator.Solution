@page
@{
    ViewData["Title"] = "Get Signals";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>@ViewData["Title"]</h2>

<form id="getSignalsForm">
    <label>Count:</label>
    <input type="number" id="count" required>

    <label>Protocol:</label>
    <select id="protocolType">
        <option value="http">HTTP</option>
        <option value="modbus">Modbus</option>
        <option value="signalar">SignalR</option>
    </select>

    <button type="submit">Get</button>
</form>

<div id="result"></div>

@section Scripts {
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $("#getSignalsForm").submit(function(e){
            e.preventDefault();
            $.get("/api/signal/get", { count: $("#count").val(), protocolType: $("#protocolType").val() }, function(data){
                $("#result").html(JSON.stringify(data));
            }).fail(function(err){
                alert("Error: " + err.responseText);
            });
        });
    </script>
}
